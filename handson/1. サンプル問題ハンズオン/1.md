
# 問1

* 環境
  * 複数のアベイラビリティーゾーンにまたがるVPC
  * パブリック層のWebApp
  * プライベートサブネット上のEC2
* 問題
  * プライベートのEC2でインターネットアクセスする際の方法
* 選択肢
  * A パブリックサブネットで NAT ゲートウェイを構成する。
  * B インターネットトラフィック用の NAT ゲートウェイへのルートがあるカスタムルートテーブルを定義し、アプリケーション層のプライベートサブネットに関連付ける。
  * C Elastic IP アドレスを EC2 インスタンスに割り当てる。
  * D インターネットトラフィック用のインターネットゲートウェイへのルートがあるカスタムルートテーブルを定義し、アプリケーション層のプライベートサブネットに関連付ける。
  * E プライベートサブネットで NAT インスタンスを設定する。

## 正解

A、B – NAT ゲートウェイは、プライベートサブネット内の EC2 インスタンスからインターネットや他の
AWS のサービスにトラフィックを転送し、その応答をインスタンスに送り返します。
NAT ゲートウェイを作成した後、プライベートサブネットのルートテーブルを更新して、
インターネットトラフィックを NAT ゲートウェイに向ける必要があります。




# 環境構築

## VPCの作成

サブネットはVPCの指定が必要なので、まずはここから作成。

[VPC 作成](https://docs.aws.amazon.com/ja_jp/directoryservice/latest/admin-guide/gsg_create_vpc.html)

[IPv4 CIDR Block](https://qiita.com/Nt_CeCZL/items/937ffc3d42c0025353e3)

VPC and moreを使用すると良さげ。
パブリック、プライベートを2つで設定して作成

## サブネットの作成

[IPv4 CIDR 制限](https://docs.aws.amazon.com/vpc/latest/userguide/configure-your-vpc.html#add-cidr-block-restrictions)




## ec2の作成

わかりやすくするため、


# 動作確認

## ec2への接続


* 方法
  * [RD GateWay](https://medium.com/@SatyaSa21/how-to-login-to-windows-ec2-in-private-subnet-using-rd-gateway-d07088a9dc1d)
    * <https://aws.amazon.com/jp/quickstart/architecture/rd-gateway/>
  * https://www.netassist.ne.jp/techblog/13668/
    * portforward
<!-- TODO RD GateWay -->
















